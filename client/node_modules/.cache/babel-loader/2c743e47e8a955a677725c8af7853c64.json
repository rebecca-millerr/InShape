{"ast":null,"code":"var _jsxFileName = \"/Users/Rebecca/Documents/soph/comp20/final/InShape/client/src/LogIn.js\";\nimport React, { Component } from 'react';\nimport './LogIn.css';\n\nconst passwordHash = require('password-hash');\n\nclass LogIn extends Component {\n  constructor() {\n    super();\n    this.state = {\n      username: \"\",\n      password: \"\",\n      loggedIn: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.authenticate = this.authenticate.bind(this);\n  }\n\n  handleChange(event) {\n    const _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  async authenticate() {\n    const status = await fetch('/info/' + this.state.username);\n    console.log(status);\n    const json = await status.json(); // .json()\n\n    console.log(json); // const response = await fetch('/info/' + this.state.username);\n    // console.log(response)\n    // const json = await response.json();\n    // console.log(json)\n\n    let hashedPassword;\n\n    if (json.status === \"failed\") {\n      alert('No user with this username exists. Did you mean to sign up?');\n      return;\n    } else {\n      hashedPassword = json[0].password;\n      const matchingPasswords = passwordHash.verify(this.state.password, hashedPassword);\n      console.log(matchingPasswords);\n\n      if (!matchingPasswords) {\n        alert('Invalid login credentials. Try again!');\n        return;\n      } else {\n        const status = await fetch('/log_in/' + this.state.username);\n        console.log(status);\n        this.setState({\n          loggedIn: true\n        });\n        this.props.validate();\n      }\n    } // json = { username : asdjknad, first_name = akajsnkaj ... }\n    // console.log(json.username)\n    // json is object with all info\n    // because /log_in/ only returns username\n    // /info would return everything\n    // clear state\n\n  }\n\n  render() {\n    if (this.state.loggedIn) {\n      return React.createElement(\"div\", {\n        className: \"LogInPage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"LogInHeading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"All done!\"), React.createElement(\"h3\", {\n        className: \"LogInReminder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Be sure to log out when you're done!\"));\n    }\n\n    return React.createElement(\"div\", {\n      className: \"LogInPage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"LogInHeading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \" Log In to get InShape!\"), React.createElement(\"form\", {\n      className: \"LoginFormBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"username\",\n      placeholder: \"Username\",\n      onChange: this.handleChange,\n      value: this.state.username,\n      className: \"LoginTextField\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      placeholder: \"Password\",\n      onChange: this.handleChange,\n      value: this.state.password,\n      className: \"LoginTextField\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      onClick: this.authenticate,\n      className: \"LoginSubmitButton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Log In\")))));\n  }\n\n}\n\nexport default LogIn;","map":{"version":3,"sources":["/Users/Rebecca/Documents/soph/comp20/final/InShape/client/src/LogIn.js"],"names":["React","Component","passwordHash","require","LogIn","constructor","state","username","password","loggedIn","handleChange","bind","authenticate","event","target","name","value","setState","status","fetch","console","log","json","hashedPassword","alert","matchingPasswords","verify","props","validate","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\n\nimport './LogIn.css';\nconst passwordHash = require('password-hash');\n\nclass LogIn extends Component {\n    constructor() {\n        super();\n        this.state = {\n            username : \"\",\n            password : \"\",\n            loggedIn : false\n        }\n        this.handleChange = this.handleChange.bind(this);\n        this.authenticate = this.authenticate.bind(this);\n    }\n\n    handleChange(event) {\n        const {name, value} = event.target;\n        this.setState({\n            [name]: value\n        });\n    }\n\n    async authenticate() {\n      \n        const status = await fetch('/info/' + this.state.username);\n        console.log(status)\n        const json = await status.json(); // .json()\n        console.log(json);\n        \n        // const response = await fetch('/info/' + this.state.username);\n        // console.log(response)\n        // const json = await response.json();\n        // console.log(json)\n\n        let hashedPassword;\n\n        if ( json.status === \"failed\" ) {\n            alert('No user with this username exists. Did you mean to sign up?');\n            return;\n        }\n        else {\n            hashedPassword = json[0].password;\n            const matchingPasswords = passwordHash.verify(this.state.password, hashedPassword);\n            console.log(matchingPasswords);\n\n            if ( !matchingPasswords ) {\n                alert('Invalid login credentials. Try again!');\n                return;\n            }\n            else {\n                const status = await fetch('/log_in/' + this.state.username);\n                console.log(status)\n\n                this.setState({\n                    loggedIn : true\n                });\n\n                this.props.validate();\n            }\n\n        }\n\n        \n        // json = { username : asdjknad, first_name = akajsnkaj ... }\n        // console.log(json.username)\n        // json is object with all info\n        // because /log_in/ only returns username\n        // /info would return everything\n\n        // clear state\n        \n    }\n\n    render() {\n        if ( this.state.loggedIn ) {\n            return(\n                <div className = \"LogInPage\">\n                    <h1 className = \"LogInHeading\">All done!</h1>\n                    <h3 className = \"LogInReminder\">Be sure to log out when you're done!</h3>\n                </div>\n            )\n        }\n\n        return(\n            <div className = \"LogInPage\">\n                <h1 className = \"LogInHeading\"> Log In to get InShape!</h1>\n                <form className = \"LoginFormBox\">                    \n                    <input \n                        type = \"text\"\n                        name = \"username\"\n                        placeholder = \"Username\"\n                        onChange = {this.handleChange}\n                        value = {this.state.username}\n                        className = \"LoginTextField\" \n                        required\n                    />\n                    <br />\n                    <input \n                        type = \"password\"\n                        name = \"password\"\n                        placeholder = \"Password\"\n                        onChange = {this.handleChange}\n                        value = {this.state.password}\n                        className = \"LoginTextField\" \n                        required\n                    />\n\n                    <div>\n                        <center><div onClick = {this.authenticate} className = \"LoginSubmitButton\">Log In</div></center>\n                    </div>  \n                </form>\n            </div>\n        )\n    }\n}\n\nexport default LogIn;"]},"metadata":{},"sourceType":"module"}